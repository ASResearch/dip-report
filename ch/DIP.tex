\section{开发者激励协议}
\subsection{从调用次数到投票贡献值}
对于任何一个用户$a_i$，我们将$NR_i$认为是该用户能投票的总效用值，即可以当作他手中握有的选票总张数。这意味着NR值高的用户可以获得更高的投票权。根据章节\ref{subsec:2.3}的说明我们暂时不考虑用户调用dapp过程中的资金交互。在后面的章节中我们会讨论基于完善的资金流向检测机制下如何引入资金交互来扩展该模型。

设$NR_{ij}$为$a_i$对$d_j$的分贡献值，其定义为
$$  NR_{ij} = \frac{e_{ij}}{e_{i0}+\sum_{j=1}^n {e_{ij}}}$$
即对$d_j$调用次数在总调用次数上的占比。这里$e_{i0}$表示$a_i$不属于上述任何一个dapp的调用次数。用户$a_i$可以任意调整$e_{i0}$以及$e_{ij}$的数值。

%%定义
%$$  NR_{i0} = \frac{e_{i0}}{e_{i0}+\sum_{j=1}^n {e_{ij}}}$$
易见，
$$\sum_{j=1}^n NR_{ij} \leq NR_i$$

值得一提的是，本小章我们需要达到的目的仅仅是让用户可以任意分配自己的NR值用于投票（即任意选择分贡献值）。有些dapp可能采取强行增加调用次数的手段（比如规定必须调用两次才生效），但因为用户调用次数和NR分配现状都是可见的，用户仍然可以通过调整调用次数来达到自己期望达到的NR值分配方式。并且即使我们不是根据次数线性分配NR而是采用其他方式，聪明的用户总能找到其他投票方案以实现（期望达到的NR值分配方式）。

引入$e_{i0}$的意义在于，为了保证用户的个人理性（individual rational，即参加此次活动不会损失利益），我们不强制用户投出所有的选票，用户可以选择性的行使部分投票权或完全弃权，通过适量增加$e_{i0}$的值。\footnote{$e_{i0}$的实现可以通过官方设立一个类似“垃圾桶”的虚拟dapp，不含任何实际效用。用户可以调用“垃圾桶”任意次数。}这适用于用户觉得质量上乘的dapp太少的情况。

%因为一个用户投票的dapp数目过多对于区分该用户心中优秀dapp意义不大，且容易造成用户贡献值过大以及后面会出现的拉平效应等问题，我们只取该用户分贡献值排名前$K$的dapp，即设$NR_{ij_1},...,NR_{ij_k}$为用户$a_i$前$K$大的分贡献值（可以包括$NR_{i0}$），将他们的值归一化为
%$$NR_{ij_{k}} \rightarrow NR_{ij_{k}} \times \frac{NR_i}{\sum_{t=1}^K NR_{ij_{t}}}, \forall k=1,2,...,K$$
%且对所有排名在$K$以后的分贡献值将它们全部置为0。

\subsection{从分贡献值到排名分}
给定所有的分贡献值$NR_{ij}, i=1,2,...,m,j=1,2,...,n$，定义dapp $d_j$的排名分为

$$score_j = \sum_{i=1}^m \sqrt{NR_{ij}}$$

易见，当用户$a_i$只投给一个dapp时，他的投票分贡献值之和为$\sqrt{NR_i}$。而当他将票分散给不同的dapp时，根据根号函数的反叠加性，他投票的总效用会提高，这意味着他接触了更多的dapp，而这也是我们的系统所鼓励的。下一章会证明这样构造排名分的方法具有很好的性质。类似的思想可用见于V神的论文\cite{buterin2018liberal}里面用到的二阶投票算法，虽然两者的模型完全不同。

当排名分$score_i$给出之后，dapp排名也将据此在链上展示。排名分高的dapp将被放在更显著的位置，也会受到更多的关注。值得一提的是我们假设用户只关心心目中的dapp的排名，而不会关心dapp开发者具体分配到多少奖励。这在我们后面的用户行为分析章节中会详细讨论。

\subsection{从排名分到最终奖励}
给定所有dapp的排名分$score_j,i=1,2,...,n$，定义dapp $d_j$开发者的奖励为

$$u_i = \frac{score_j^2}{\sum_{k=1}^n score_j^2}\times \lambda M$$

其中$M$是星云团队用于发放奖励的最大值，$\lambda $表示参与系数，即我们希望参与评选的用户越多给的奖励总额越大，具体定义为
$$\lambda=\min\{\frac{NR_p}{NR_s\times \alpha}\times \min\{\frac{NR_p^2\times \beta}{Var_p},1\},1\}$$

其中$$NR_p = \sum_{i=1}^m (NR_i-NR_{i0}),~~~NR_{i0} = \frac{e_{i0}NR_i}{e_{i0}+\sum_{j=1}^n {e_{ij}}}$$
为参与投票的用户有效分贡献之和。$NR_s$为社区所有用户$NR$的总和。$Var_p$为参与投票用户有效分贡献的方差，其最大值为$\frac{(m-1)^2}{m^2}NR_p^2$。
$\alpha,\beta<1$为可调的参数。引入参与系数目的是让参与活动的用户总$NR$达到某个阈值（社区总NR的$\alpha$倍），以及让参与评选用户NR值的方差限定在某个范围内，防止出现少量高$NR$值用户带大量虚假账户的情况。两者可互补，即参与投票用户NR总值够高时可以不考虑方差的影响。
\subsection{关于策略调整}
我们始终把维护星云生态的健康发展当作星云人首要任务，而维护星云之上开发者、推广者及用户的利益更是星云人责无旁贷的义务。对于星云而言，不同的发展阶段其利益诉求也不尽相同，我们始终聆听来自社区的各种声音，响应不同的利益诉求。

为此，对于此次评选中的算法，我们保留进一步调整的可能性，以响应社区中对于利益的不同诉求。
